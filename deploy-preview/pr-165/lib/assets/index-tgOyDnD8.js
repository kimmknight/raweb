import{d as ie,c as O,u as H,a as le,b as ue,w as Q,r as E,o as R,e as pe,i as ce,f as de,g as fe,h as me,j as T,k as c,l,m as s,T as ve,n as b,p as M,s as w,N as he,q as ye,t as p,I as $,F as L,v as ge,x as z,P as be,y as we,z as V,A as x,B as ke,C as i,D as d,E as _,G,H as J,J as Se,_ as Ee,K as Re,L as Te,M as _e,O as Pe,Q as Ae,R as Ce,S as De,U as Me,V as X,W as Le,X as Ve,Y as xe,Z as He,$ as Be}from"./shared-DYe2yN8D.js";import{N as Ne}from"./404-1XlzT9v7.js";const We={id:"appContent"},Ue={id:"page"},qe={key:1},Fe={style:{display:"flex",gap:"8px","align-items":"center"}},j="https://github.com/kimmknight/raweb/wiki/Trusting-the-RAWeb-server-(Fix-security-error-5003)",Ie=ie({__name:"App",setup(r){const m=HTMLDialogElement.prototype.requestClose!==void 0,o=O({get:()=>!1,set:()=>{}}),u=fe(),v=H(),{t:P}=le(),A={mergeTerminalServers:m===!1?o:V,hidePortsWhenPossible:x},{data:C,loading:ee,error:te,refresh:D}=ue(v.iisBase,A);let h=null;Q(V,async(a,e)=>{if(a===h)return;const{error:t}=await D(A);t.value!==null?(h===null&&(h=e),V.value=h):h=null});let y=null;Q(x,async(a,e)=>{if(a===y)return;const{error:t}=await D(A);t.value!==null?(y===null&&(y=e),x.value=y):y=null});const N=E(!1),W=E(!1);async function se(a){if(a.data.type==="fetch-queue"){const e=a.data.backgroundFetchQueueLength>0;W.value=e}}R(()=>{pe(se).then(a=>{a==="SSL_ERROR"&&(N.value=!0)})});const U=E(!1);ce.then(()=>{U.value=!0});const q=E(!1);R(()=>{q.value=!0});const ae=O(()=>q.value&&C.value&&!te.value&&U.value);de(()=>{ae.value&&ke()}),R(()=>{const a=window.matchMedia("(prefers-reduced-motion: reduce)");function e(){a.matches}return a.addEventListener("change",e),a.matches,()=>{a.removeEventListener("change",e)}}),u.beforeResolve((a,e,t)=>{const n=window.matchMedia("(prefers-reduced-motion: reduce)").matches;if(!document.startViewTransition||n)return t();const g=document.querySelector(".root-splash-wrapper");if(g&&g.style.display!=="none")return;const k=document.querySelector("main"),S=k?k.querySelector("div"):null;S&&(S.style.overflow="hidden"),document.startViewTransition(()=>{t()}).ready.then(()=>{setTimeout(()=>{k&&S&&(k.scrollTo({top:0,left:0,behavior:"instant"}),S.style.overflow="unset")},130),requestAnimationFrame(()=>{})})});const{updateDetails:F,populateUpdateDetails:re}=me();R(()=>{re()});const ne=(()=>{const a=v.policies.signedInUserGlobalAlerts;if(!a)return[];try{const e=JSON.parse(a);return Array.isArray(e)?e.filter(t=>t&&typeof t=="object"&&typeof t.title=="string"||t.title===void 0&&typeof t.message=="string"||t.message===void 0&&(typeof t.linkText=="string"||t.linkText===void 0)&&(typeof t.linkHref=="string"||t.linkHref===void 0)&&(t.type==="information"||t.type==="attention"||t.type===void 0)):[]}catch{return[]}})();function I(a,e){const t=window.open(a,e,"width=1000,height=600,menubar=0,status=0");t?t.focus():alert("Please allow popups for this application")}return(a,e)=>{const t=we("router-view");return i(),T(L,null,[c(s(ve),{forceVisible:"",loading:W.value||s(ee),update:s(F)},null,8,["loading","update"]),l("div",We,[s(w)?M("",!0):(i(),b(s(he),{key:0})),l("main",{class:ye({simple:s(w)})},[N.value?(i(),b(s($),{key:0,severity:"caution",title:s(P)("securityError503.title"),style:{"border-radius":"0"}},{default:p(()=>[d(_(s(P)("securityError503.message"))+" ",1),e[1]||(e[1]=l("br",null,null,-1)),c(s(G),{variant:"hyperlink",href:j,style:{"margin-left":"-11px","margin-bottom":"-6px"},target:"_blank",onClick:e[0]||(e[0]=J(n=>I(j,"help"),["prevent"]))},{default:p(()=>[d(_(s(P)("securityError503.action")),1)]),_:1})]),_:1},8,["title"])):M("",!0),(i(!0),T(L,null,ge(s(ne),(n,g)=>(i(),b(s($),{key:g,severity:n.type||"attention",title:n.title,class:"global-alert"},{default:p(()=>[d(_(n.message)+" ",1),n.linkText&&n.linkHref?(i(),T(L,{key:0},[e[2]||(e[2]=l("br",null,null,-1)),c(s(G),{variant:"hyperlink",href:n.linkHref,style:{"margin-left":"-11px","margin-bottom":"-6px"},target:"_blank",onClick:J(oe=>I(n.linkHref,n.title||`alert-link-${g}`),["prevent"])},{default:p(()=>[d(_(n.linkText),1)]),_:2},1032,["href","onClick"])],64)):M("",!0)]),_:2},1032,["severity","title"]))),128)),l("div",Ue,[s(C)?(i(),b(t,{key:0},{default:p(({Component:n})=>[(i(),b(Se(n),{data:s(C),update:s(F),"refresh-workspace":s(D)},null,8,["data","update","refresh-workspace"]))]),_:1})):(i(),T("div",qe,[c(s(z),{variant:"title"},{default:p(()=>e[3]||(e[3]=[d("Loading")])),_:1}),e[5]||(e[5]=l("br",null,null,-1)),e[6]||(e[6]=l("br",null,null,-1)),l("div",Fe,[c(s(be),{size:24}),c(s(z),{style:{"font-weight":"500"}},{default:p(()=>e[4]||(e[4]=[d("Please wait...")])),_:1})])]))])],2)])],64)}}}),Oe=Ee(Ie,[["__scopeId","data-v-5376a6c3"]]),Qe=[{path:"/apps",component:_e},{path:"/devices",component:Pe},{path:"/favorites",component:Ae},{path:"/policies",component:Ce},{path:"/settings",component:De},{path:"/simple",component:Me},{path:"/",redirect(r){return K()}},{path:"/:pathMatch(.*)*",component:Ne,beforeEnter:(r,m,o)=>{if(r.path.endsWith("/index.html")){const u=r.path.slice(0,-10)||"/",v=new URL(document.baseURI.replace("/index.html","/")).pathname;return u===v&&(window.location.href=v.slice(0,-1)+K()),o(u)}if(r.path.endsWith(".html")){const u=r.path.slice(0,-5);return o(u)}o()}}],Y=CSS.supports("position-area","center center");function K(){return w.value?"/simple":X.value&&Y?"/favorites":"/apps"}const B=Re({history:Te(),routes:Qe});B.beforeEach((r,m,o)=>{if(!w.value&&r.path==="/simple")return o("/favorites");if(w.value&&["/apps","/devices","/favorites"].includes(r.path))return o("/simple");if((!X.value||!Y)&&r.path==="/favorites")return o("/apps");if(!H().authUser.isLocalAdministrator&&r.path==="/policies")return o("/favorites");o()});const Z=Le();await H(Z).fetchData();const f=Ve(xe(Oe));f.use(Z);f.use(B);f.use(He);f.use(Be);f.directive("swap",(r,m)=>{r.parentNode&&(r.outerHTML=m.value)});await B.isReady();f.mount("#app");
